<!DOCTYPE html>
<html>
	<head>
		<style>
			#wrapper img {
				max-width: 500px;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id="wrapper">
			<img src="placeholder.jpg" id="u0"/>
			<img src="placeholder.jpg" id="u1"/>
			<img src="placeholder.jpg" id="u2"/>
			<img src="placeholder.jpg" id="u3"/>
			<img src="placeholder.jpg" id="u4"/>
			<img src="placeholder.jpg" id="u5"/>
			<img src="placeholder.jpg" id="u6"/>
		</div>
		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script>

			var $img = $('#wrapper img');

			addClasses();

			function addClasses() {
				$img.each(function(p) {
					$(this).removeClass().addClass('p' + p);
					for (i = -1; i < p; i++){
						var $class = $(this).attr('class').replace('p','');
						$(this).css('margin-left', 50 * $class).css('z-index', $img.length - p);
					}
				})
			}

			$img.on('click', function() {
				var $prev = $first = $(this).prevAll();
				var arr = $.makeArray($prev);
				arr.reverse();
				$(arr).insertAfter('img:last');
				$img = $('#wrapper img')
				addClasses();		
			})

		</script>
	</body>
</html>